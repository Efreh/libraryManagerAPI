# Spring MVC Библиотека

## Описание
Проект представляет собой RESTful API для управления книгами в библиотеке, реализованный с использованием Spring Boot, Spring Data JPA и аннотаций Spring MVC. API поддерживает CRUD-операции для работы с книгами и авторами, а также предоставляет возможности для сортировки и пагинации списка книг.

## Функциональность

- **CRUD-операции для книг:**
    - Создание новой книги
    - Получение списка всех книг с поддержкой сортировки и пагинации
    - Обновление информации о книге
    - Удаление книги

- **Работа с авторами:**
    - Создание и управление авторами для книг

- **Обработка ошибок:**
    - Поддержка кастомных исключений, таких как `BookNotFoundException` и `AuthorNotFoundException`
    - Возвращение понятных сообщений об ошибках и корректных HTTP-статусов

## Эндпоинты

| Метод    | URL                   | Описание                                                    |
|----------|------------------------|-------------------------------------------------------------|
| `GET`    | `/api/books`          | Получение списка книг с пагинацией и сортировкой            |
| `GET`    | `/api/books/{id}`      | Получение информации о конкретной книге по `id`             |
| `POST`   | `/api/books`          | Добавление новой книги                                      |
| `PUT`    | `/api/books/{id}`      | Обновление информации о книге по `id`                       |
| `DELETE` | `/api/books/{id}`      | Удаление книги по `id`                                      |

### Примеры использования
- **Получение списка книг:** `/api/books?page=0&size=10&sort=title`
    - Параметры `page`, `size`, и `sort` позволяют управлять пагинацией и сортировкой.

- **Получение книги по ID:** `/api/books/{id}`
    - При некорректном `id` возвращается `404 Not Found` с соответствующим сообщением об ошибке.

## Используемые технологии

- **Spring Boot 3:** для создания и конфигурации приложения
- **Spring Data JPA:** для работы с базой данных и управления сущностями `Book` и `Author`
- **Spring MVC:** для создания RESTful API и обработки HTTP-запросов
- **Pageable:** для реализации пагинации и сортировки в запросах на получение списка книг

## Тестирование

В проекте предусмотрены тесты для проверки корректной работы эндпоинтов и функциональности пагинации, включая:

- Проверку работы сортировки и пагинации на эндпоинте получения списка книг.
- Проверку правильной обработки исключений, таких как BookNotFoundException.
- **Запуск тестов:**

```
mvn test
```

## Обработка ошибок
Для обработки исключений реализован ExceptionApiHandler, который обрабатывает исключения и возвращает корректные HTTP-статусы и информативные сообщения:

- **404 Not Found:** Книга или автор не найдены.
- **500 Internal Server Error:** В случае непредвиденных ошибок на сервере.

## Структура проекта
- **Controller: BookController** — контроллер для обработки запросов, связанных с книгами.
- **Service: BookService и AuthorService** — сервисы для реализации бизнес-логики.
- **Repository: BookRepository и AuthorRepository** — репозитории для работы с базой данных.
- **Entity: Book и Author** — сущности, представляющие книги и авторов в базе данных.
- **Exception:** Кастомные исключения BookNotFoundException и AuthorNotFoundException для улучшенной обработки ошибок.